@import securesocial.core.RuntimeEnvironment
@import play.api.data.Form
@import ems.views.html.mainAuth
@import ems.models.{User, PhoneNumber}
@import helper.form._
@import helper._
@import ems.views.html.utils.alerts
@import ems.views.html.utils.formValidation
@import ems.views.utils.FormInfo
@import ems.views.html.utils.twitterBootstrapInput

@(formInfo: FormInfo[PhoneNumber], smsTarget: String, emailTarget: String)(implicit user: User, request: RequestHeader, env: RuntimeEnvironment[User], flash: Flash)


@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) }

@scripts = {
    <script src="@routes.Assets.at("lib/jquery-validation/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("lib/jquery-validation/additional-methods.min.js")" type="text/javascript"></script>
    @formValidation(formInfo) {
        rules: {
            phoneNumber: {
                required: true,
                phoneUS: true,
            }
        },
        messages: {
            phoneNumber: {
                required: "Enter your phone number",
                @formInfo.messages.get("phoneNumber").map { message => phoneUS: "@message" }
            }
        }
    }
}

@mainAuth("Account", scripts = scripts, user = Some(user)){

	<div class="row">
        @alerts(flash, formInfo.form)
	</div>

	<div class="panel panel-primary">
		<div class="panel-heading">
			<h3 class="panel-title">Account information</h3>
		</div>
		<div class="panel-body">
			<div class="row">
				<div class="col-lg-8">
					<div class="well form-horizontal">
						@helper.form(action = formInfo.postAction, 'id -> "accountForm") {
							<fieldset>
                                @inputText(formInfo.form("phoneNumber"), 'class -> "form-control", '_label -> "Phone number")
							</fieldset>
							<div class="form-group">
								<div class="col-lg-10 col-lg-offset-3">
									<button class="btn btn-primary" type="submit">Submit</button>
									<button class="btn btn-default reset">Reset</button>
								</div>
							</div>
						}
					</div>
                    <div class="well">You can send sms to this phone number: <strong>@smsTarget</strong></div>
                    <div class="well">You can send emails to this address: <strong>@emailTarget</strong></div>
                    <div class="well">Name: @user.main.fullName.getOrElse("")</div>
                    <div class="well">Logged in from: @user.main.providerId</div>
                    <div class="well">Email: @user.main.email.map { email => @email }.getOrElse("Not Available")</div>
				</div>
				<div class="col-lg-4">
					<div class="well">
					    @**********
						@sideBar(active)
					    **********@
					</div>
				</div>
			</div>

		</div>
	</div>

}

