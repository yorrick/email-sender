@import securesocial.core.RuntimeEnvironment

@(loginForm: Form[(String,String)], errorMsg: Option[String] = None)(implicit request: RequestHeader, lang: Lang, env: RuntimeEnvironment[_])

@import securesocial.core.providers.UsernamePasswordProvider.UsernamePassword
@import ems.views.html.main


@main("Login"){
    <div class="page-header">
        <h1>@Messages("securesocial.login.title")</h1>
    </div>

    @errorMsg.map { msg =>
    <div class="alert alert-error">
        @Messages(msg)
    </div>
    }

    @request.flash.get("success").map { msg =>
    <div class="alert alert-info">
        @msg
    </div>
    }

    @request.flash.get("error").map { msg =>
    <div class="alert alert-error">
        @msg
    </div>
    }

    <div class="clearfix">
        <p>@Messages("securesocial.login.instructions")</p>
        <p>
            @for(provider <- env.providers.values) {
                @defining( "images/auth/%s.png".format(provider.id) ) { imageUrl =>
                    <a href="@env.routes.authenticationUrl(provider.id)"> <img src="@routes.Assets.at(imageUrl)"/></a>
                }
            }
        </p>
    </div>
}()